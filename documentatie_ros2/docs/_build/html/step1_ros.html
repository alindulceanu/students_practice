
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Basic talker tutorial &#8212; Documentatie ros2 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/groundwork.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Installing Docker Desktop" href="docker.html" />
    <link rel="prev" title="Getting started" href="start.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="docker.html" title="Installing Docker Desktop"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="start.html" title="Getting started"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Documentatie ros2 1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Basic talker tutorial</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="basic-talker-tutorial">
<h1>Basic talker tutorial<a class="headerlink" href="#basic-talker-tutorial" title="Permalink to this heading">¶</a></h1>
<p>Now that we have our setup complete, we can start experimenting with the tools <code class="docutils literal notranslate"><span class="pre">ROS2</span></code> has to offer.</p>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#creating-a-talker-using-python" id="id1">Creating a talker using python</a></p>
<ul>
<li><p><a class="reference internal" href="#what-is-a-talker" id="id2">What is a talker?</a></p></li>
<li><p><a class="reference internal" href="#full-code" id="id3">Full code</a></p></li>
<li><p><a class="reference internal" href="#explaining-the-code" id="id4">Explaining the code</a></p></li>
<li><p><a class="reference internal" href="#adding-dependencies-to-the-ros-package" id="id5">Adding dependencies to the ROS package</a></p></li>
<li><p><a class="reference internal" href="#editing-the-entry-points-in-setup-py" id="id6">Editing the entry points in setup.py</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#building-and-running-the-node" id="id7">Building and running the node</a></p></li>
</ul>
</nav>
<section id="creating-a-talker-using-python">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Creating a talker using python</a><a class="headerlink" href="#creating-a-talker-using-python" title="Permalink to this heading">¶</a></h2>
<section id="what-is-a-talker">
<h3><a class="toc-backref" href="#id2" role="doc-backlink">What is a talker?</a><a class="headerlink" href="#what-is-a-talker" title="Permalink to this heading">¶</a></h3>
<p>A talker node is used to send data to a <code class="docutils literal notranslate"><span class="pre">topic</span></code>. This data can be sensor values, commands, camera frames, etc..</p>
<p>In order to create one we need to go inside our project directory that we’ve built in the previous chapter.</p>
<p>Inside that directory we’ll find some configuration files that we will discuss later in this tutorial and another directory named exactly like the package name.</p>
<p>Inside that directory we want to create our python script:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">touch</span> <span class="n">talker</span><span class="o">.</span><span class="n">py</span> <span class="o">&amp;&amp;</span> <span class="n">chmod</span> <span class="mi">700</span> <span class="n">talker</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>Now you can use any code editor you preffer. I recommend <code class="docutils literal notranslate"><span class="pre">VSCode</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">code</span> <span class="n">talker</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section id="full-code">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">Full code</a><a class="headerlink" href="#full-code" title="Permalink to this heading">¶</a></h3>
<p>Inside it place this code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>

<span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">import</span> <span class="nn">rclpy</span>
<span class="kn">from</span> <span class="nn">rclpy.node</span> <span class="kn">import</span> <span class="n">Node</span>
<span class="kn">from</span> <span class="nn">geometry_msgs.msg</span> <span class="kn">import</span> <span class="n">Twist</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="k">class</span> <span class="nc">publisherNode</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topic</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;My_Publisher_NODE&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Publisher has been started!&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">topic</span> <span class="o">=</span> <span class="n">topic</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">publisher_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_publisher</span><span class="p">(</span><span class="n">Twist</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">topic</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timer_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_timer</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">publishMessage</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">publishMessage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="n">Twist</span><span class="p">()</span>

        <span class="n">msg</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">+</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">99</span><span class="p">)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">+</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">99</span><span class="p">)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">+</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">99</span><span class="p">)</span>

        <span class="n">msg</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">+</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">99</span><span class="p">)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">+</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">99</span><span class="p">)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">+</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">99</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">publisher_</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="n">rclpy</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">args</span> <span class="o">=</span> <span class="n">args</span><span class="p">)</span>

    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="vm">__doc__</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;input&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;topic name&quot;</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

    <span class="n">node</span> <span class="o">=</span> <span class="n">publisherNode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">input</span><span class="p">))</span>
    <span class="n">rclpy</span><span class="o">.</span><span class="n">spin</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>

    <span class="n">rclpy</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="explaining-the-code">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">Explaining the code</a><a class="headerlink" href="#explaining-the-code" title="Permalink to this heading">¶</a></h3>
<p>Now let’s make a quick walktrough:</p>
<p>For every <code class="docutils literal notranslate"><span class="pre">node</span></code> in ROS2 you need to specify the path of the interpretter.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Argparse</span></code> is a built-in python library that enables a script to receive arguments directly from a console.</p>
<p><code class="docutils literal notranslate"><span class="pre">rclpy</span></code> is the main library that we’ll use for ROS.</p>
<p><code class="docutils literal notranslate"><span class="pre">rclpy.node.Node</span></code> is a class from rclpy that we will inherit every time we want to build a node, this will give us tons of tools that can be easily implemented in out code.</p>
<p><code class="docutils literal notranslate"><span class="pre">geometry_msgs</span></code> is a library from ROS that contains many classes with the purpose of storing a specific message.</p>
<p><code class="docutils literal notranslate"><span class="pre">Twist</span></code> is a message type that we we’ll send over to a topic below.</p>
<p><code class="docutils literal notranslate"><span class="pre">random</span></code> is another python built-in module that helps us generate random numbers, we’ll use it to create unique messages to send</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">import</span> <span class="nn">rclpy</span>
<span class="kn">from</span> <span class="nn">rclpy.node</span> <span class="kn">import</span> <span class="n">Node</span>
<span class="kn">from</span> <span class="nn">geometry_msgs.msg</span> <span class="kn">import</span> <span class="n">Twist</span>
<span class="kn">import</span> <span class="nn">random</span>
</pre></div>
</div>
<p>The first step in creating a node is inheriting the Node class mentioned above and using the <code class="docutils literal notranslate"><span class="pre">super()</span></code> method.</p>
<p>The text inside the super() method is what will the node be seen as inside rqt_graph</p>
<p>Line 4 is the message the node will return on the terminal if it has started succesfully.</p>
<p>When runnning the node, we will use the topic name we want to assign as an argument that we’ll use below.</p>
<p><code class="docutils literal notranslate"><span class="pre">self.publisher_</span></code> is an object that we’ll use to send Twist type messages in the <code class="docutils literal notranslate"><span class="pre">self.topic</span></code>
topic while “10” is the queue size for the output buffer, “10” is the most commonly used value.</p>
<p><code class="docutils literal notranslate"><span class="pre">self.timer_</span></code> is an object that will call a chosen function every “1” second.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">publisherNode</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topic</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;My_Publisher_NODE&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Publisher has been started!&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">topic</span> <span class="o">=</span> <span class="n">topic</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">publisher_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_publisher</span><span class="p">(</span><span class="n">Twist</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">topic</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timer_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_timer</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">publishMessage</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">msg</span></code> will be the message that we want to send, we declare it as an object of the Twist() class</p>
<p><code class="docutils literal notranslate"><span class="pre">Twist()</span></code> has 6 internal variables that we can use as messages: linear and angualar velocities for every axis</p>
<p>We edit those using the <code class="docutils literal notranslate"><span class="pre">random</span></code> module to generate unique numbers</p>
<p>After that, we use the .publish method of our <code class="docutils literal notranslate"><span class="pre">self.publisher_</span></code> object we created earlier to send the message in the topic</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="nf">publishMessage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="n">Twist</span><span class="p">()</span>

        <span class="n">msg</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">+</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">99</span><span class="p">)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">+</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">99</span><span class="p">)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">+</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">99</span><span class="p">)</span>

        <span class="n">msg</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">+</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">99</span><span class="p">)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">+</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">99</span><span class="p">)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">+</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">99</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">publisher_</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</pre></div>
</div>
<p>This is the main function. This is the function that ROS will call in order to activate the node.</p>
<p><code class="docutils literal notranslate"><span class="pre">rclpy.init()</span></code> and <code class="docutils literal notranslate"><span class="pre">rclpy.shutdown()</span></code> are 2 functions that need to be called every single time you want to start a node of any kind in ROS and
and they must be placed at the beginning and at the end of the main function.</p>
<p>Next, we’ll use argparse to create a parser for the input, which will be the name of the target topic in our case.</p>
<p>We initialize an object of our class we’ve just created and send the topic name as an argument for it.</p>
<p><code class="docutils literal notranslate"><span class="pre">rclpy.spin()</span></code> is a function that makes the node keep working after the first iteration until we manually close it.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="n">rclpy</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">args</span> <span class="o">=</span> <span class="n">args</span><span class="p">)</span>

    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="vm">__doc__</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;input&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;topic name&quot;</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

    <span class="n">node</span> <span class="o">=</span> <span class="n">publisherNode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">input</span><span class="p">))</span>
    <span class="n">rclpy</span><span class="o">.</span><span class="n">spin</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>

    <span class="n">rclpy</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="adding-dependencies-to-the-ros-package">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Adding dependencies to the ROS package</a><a class="headerlink" href="#adding-dependencies-to-the-ros-package" title="Permalink to this heading">¶</a></h3>
<p>In the <code class="docutils literal notranslate"><span class="pre">src/&quot;your_package_name&quot;</span></code> you will find a file named <code class="docutils literal notranslate"><span class="pre">package.xml</span></code>, open it:</p>
<p>Inside the file there is a section that has <code class="docutils literal notranslate"><span class="pre">&lt;depend&gt;&lt;/depend&gt;</span></code> tags.</p>
<p>You want to add the following dependencies:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">depend</span><span class="o">&gt;</span><span class="n">random</span><span class="o">&lt;/</span><span class="n">depend</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">depend</span><span class="o">&gt;</span><span class="n">rclpy</span><span class="o">&lt;/</span><span class="n">depend</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">depend</span><span class="o">&gt;</span><span class="n">geometry_msgs</span><span class="o">&lt;/</span><span class="n">depend</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">depend</span><span class="o">&gt;</span><span class="n">argparse</span><span class="o">&lt;/</span><span class="n">depend</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Now save and close the file.</p>
</section>
<section id="editing-the-entry-points-in-setup-py">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Editing the entry points in setup.py</a><a class="headerlink" href="#editing-the-entry-points-in-setup-py" title="Permalink to this heading">¶</a></h3>
<p>In the same directory you will find a file named setup.py, open it.</p>
<p>At the bottom of the code you should have the <code class="docutils literal notranslate"><span class="pre">entry_points</span></code>.</p>
<p>In <code class="docutils literal notranslate"><span class="pre">console_scripts</span> <span class="pre">add</span> <span class="pre">the</span> <span class="pre">following</span> <span class="pre">line</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;publisher = my_package_name.my_publisher_file_name:main&quot;</span>
</pre></div>
</div>
<p>Replace <code class="docutils literal notranslate"><span class="pre">my_package_name</span></code> with the name you have chosen for your ROS project name
and <code class="docutils literal notranslate"><span class="pre">my_publisher_file_name</span></code> with the name of the file your publisher code is.</p>
<p>It should look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;console_scripts&#39;</span><span class="p">:[</span>
        <span class="s2">&quot;publisher = my_package.publisher:main&quot;</span>
    <span class="p">],</span>
<span class="p">},</span>
</pre></div>
</div>
<p>Keep in mind that “publisher” is the name of the executable we will use to call this node.</p>
</section>
</section>
<section id="building-and-running-the-node">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Building and running the node</a><a class="headerlink" href="#building-and-running-the-node" title="Permalink to this heading">¶</a></h2>
<p>Now that everything has been coded, all we have to do is to go back into our <code class="docutils literal notranslate"><span class="pre">src</span></code> directory
and execute this command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">colcon</span> <span class="n">build</span> <span class="o">--</span><span class="n">symlink</span><span class="o">-</span><span class="n">install</span>
</pre></div>
</div>
<p>Using <code class="docutils literal notranslate"><span class="pre">--symlink-install</span></code> is not mandatory, but if you use it, you won’t have to build the project everytime you modify the code of this node.
(you still have to rebuild it if you add another node)</p>
<p>Now in order to run it you need to use this command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ros2</span> <span class="n">run</span> <span class="o">&lt;</span><span class="n">my_package_name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">executable_name</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">topic_name</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>In order to see the messages that are being sent, use the following command inside another terminal:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ros2</span> <span class="n">topic</span> <span class="n">echo</span> <span class="o">&lt;</span><span class="n">topic_name</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>You can also visualize the node and the topic using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rqt_graph</span>
</pre></div>
</div>
<p>And:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ros2</span> <span class="n">topic</span> <span class="nb">list</span>
</pre></div>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Basic talker tutorial</a><ul>
<li><a class="reference internal" href="#creating-a-talker-using-python">Creating a talker using python</a><ul>
<li><a class="reference internal" href="#what-is-a-talker">What is a talker?</a></li>
<li><a class="reference internal" href="#full-code">Full code</a></li>
<li><a class="reference internal" href="#explaining-the-code">Explaining the code</a></li>
<li><a class="reference internal" href="#adding-dependencies-to-the-ros-package">Adding dependencies to the ROS package</a></li>
<li><a class="reference internal" href="#editing-the-entry-points-in-setup-py">Editing the entry points in setup.py</a></li>
</ul>
</li>
<li><a class="reference internal" href="#building-and-running-the-node">Building and running the node</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="start.html"
                          title="previous chapter">Getting started</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="docker.html"
                          title="next chapter">Installing Docker Desktop</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/step1_ros.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="docker.html" title="Installing Docker Desktop"
             >next</a> |</li>
        <li class="right" >
          <a href="start.html" title="Getting started"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Documentatie ros2 1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Basic talker tutorial</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2023, Alin Dulceanu, Eduard Cimpean.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 6.2.1.
    </div>
  </body>
</html>